<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no">
    <!-- META DESCRIPTION ADDED FOR SEO -->
    <meta name="description" content="موقع لمساعدة طلاب قسم الميكاترونكس في جامعة الزقaziق الأهلية، يوفر موارد دراسية، خطط، حاسبة معدل تراكمي، والمزيد لتسهيل الرحلة التعليمية.">
    <title>Mechatronics Data</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- Root Variables for Consistent Theming (Revised for Better Contrast) --- */
        :root {
            --primary-color: #1A741A; /* Darker Forest Green for better contrast */
            --secondary-color: #5A9367; /* Medium Forest Green */
            --accent-color: #8CB48C; /* Light Forest Green */
            --accent-gradient-start: #FFFFFF;
            --accent-gradient-end: #1A741A;
            --light-bg: #F8F9FA; /* Very light grey */
            --white: #FFFFFF;
            --dark-text: #1C1F23; /* Darker charcoal for better readability */
            --medium-text: #4a5568; /* Darker grey for better readability */
            --border-light: #DEE2E6; /* Lighter border color */
            --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 8px 16px rgba(0, 0, 0, 0.15);
            --shadow-lg: 0 16px 32px rgba(0, 0, 0, 0.25);
            --border-radius-sm: 8px;
            --border-radius-md: 16px;
            --border-radius-lg: 32px;
            --spacing-xs: 0.75rem;
            --spacing-sm: 1.25rem;
            --spacing-md: 2rem;
            --spacing-lg: 3rem;
            --spacing-xl: 4.5rem;
            --background-body: linear-gradient(to bottom right, var(--accent-gradient-start) 0%, var(--accent-gradient-end) 100%);
            --background-body-scrolled: linear-gradient(to bottom right, var(--light-bg) 0%, var(--accent-color) 100%);
            --section-bg: rgba(255, 255, 255, 0.5);
            --section-border: 1px solid rgba(222, 226, 230, 0.5);
            --hero-bg-overlay: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.6));
            --mobile-header-bg: rgba(255, 255, 255, 0.98);
            --desktop-header-bg: rgba(255, 255, 255, 0.98);
            --nav-bg: linear-gradient(to bottom right, var(--accent-gradient-start) 0%, var(--accent-gradient-end) 100%);
        }

        html {
            scroll-behavior: smooth;
        }
        body {
            margin: 0;
            font-family: 'Cairo', sans-serif;
            direction: rtl;
            background-color: var(--light-bg);
            line-height: 1.7;
            color: var(--dark-text);
            background: var(--background-body);
            background-size: 600% 600%;
            animation: gradientBG 6s ease infinite;
            overflow-x: hidden;
            padding-bottom: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            /* MODIFICATION: Added padding-top for new fixed header */
            padding-top: 77px;
            transition: background 0.5s ease, color 0.5s ease;
        }
        main {
            flex-grow: 1;
            margin-top: 0;
            transition: margin-top 0.3s ease;
            will-change: filter, margin-top;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body.scrolled-lighter {
            background: var(--background-body-scrolled);
            background-size: 600% 600%;
            animation: gradientBG 6s ease infinite;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-sm);
            box-sizing: border-box;
        }

        /* --- MODIFICATION START: Section fade-in and fade-out --- */
        .animated-section {
            opacity: 0;
            transform: translateY(20px); /* Made transition more subtle */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .animated-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Staggered child animations --- */

        /* Base state for children that will animate */
        .animated-section .section-header,
        .animated-section .level-card,
        .animated-section .info-card,
        .animated-section .about-content > .about-text,
        .animated-section .about-content > .about-image,
        .animated-section .calculator-header,
        .animated-section .modern-courses-container,
        .animated-section .calculator-actions {
            opacity: 0;
            transform: translateY(30px);
            /* Add opacity and transform to existing transitions */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out,
                        box-shadow 0.3s ease, border-color 0.3s ease, background 0.5s ease;
            transition-delay: 0s; /* Default delay (for fade-out) */
            will-change: opacity, transform, box-shadow;
        }

        /* When section is visible, fade in children with delays */
        .animated-section.is-visible .section-header,
        .animated-section.is-visible .level-card,
        .animated-section.is-visible .info-card,
        .animated-section.is-visible .about-content > .about-text,
        .animated-section.is-visible .about-content > .about-image,
        .animated-section.is-visible .calculator-header,
        .animated-section.is-visible .modern-courses-container,
        .animated-section.is-visible .calculator-actions {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Stagger Delays --- */
        .animated-section.is-visible .section-header { transition-delay: 0.1s; }

        /* Stagger for #cards-section */
        #cards-section.is-visible > .level-card { transition-delay: 0.2s; } /* Level 000 */
        #cards-section.is-visible > .level-card-row:nth-of-type(2) .level-card:nth-child(1) { transition-delay: 0.3s; }
        #cards-section.is-visible > .level-card-row:nth-of-type(2) .level-card:nth-child(2) { transition-delay: 0.4s; }
        #cards-section.is-visible > .level-card-row:nth-of-type(3) .level-card:nth-child(1) { transition-delay: 0.5s; }
        #cards-section.is-visible > .level-card-row:nth-of-type(3) .level-card:nth-child(2) { transition-delay: 0.6s; }

        /* Stagger for #about-section & #aboutus-section */
        .animated-section.is-visible .about-content > .about-text { transition-delay: 0.2s; }
        .animated-section.is-visible .about-content > .about-image { transition-delay: 0.3s; }

        /* Stagger for #extras-section */
        #extras-section.is-visible .level-card-row:nth-of-type(1) .level-card:nth-child(1) { transition-delay: 0.2s; }
        #extras-section.is-visible .level-card-row:nth-of-type(1) .level-card:nth-child(2) { transition-delay: 0.3s; }

        /* Stagger for #info-cards-section */
        #info-cards-section.is-visible .info-cards-container .info-card:nth-child(1) { transition-delay: 0.2s; }
        #info-cards-section.is-visible .info-cards-container .info-card:nth-child(2) { transition-delay: 0.3s; }
        #info-cards-section.is-visible .info-cards-container .info-card:nth-child(3) { transition-delay: 0.4s; }
        #info-cards-section.is-visible .info-cards-container .info-card:nth-child(4) { transition-delay: 0.5s; }
        #info-cards-section.is-visible .info-cards-container .info-card:nth-child(5) { transition-delay: 0.6s; }

        /* Stagger for #gpa-calculator */
        #gpa-calculator.is-visible .calculator-header { transition-delay: 0.2s; }
        #gpa-calculator.is-visible .modern-courses-container { transition-delay: 0.3s; }
        #gpa-calculator.is-visible .calculator-actions { transition-delay: 0.4s; }
        /* --- MODIFICATION END --- */


        .general-button {
            display: inline-block;
            padding: 1.1rem 2.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            box-shadow: var(--shadow-sm);
            color: #fff;
            background: var(--primary-color);
            min-width: 200px;
            margin: 0.5rem;
            will-change: transform, box-shadow;
        }

        .general-button:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: var(--shadow-lg);
            background: linear-gradient(135deg, var(--secondary-color) 0%, var(--accent-color) 100%);
        }

        .general-button:active {
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }

        .general-button:focus-visible {
            outline: 3px solid var(--accent-color);
            outline-offset: 4px;
        }

        .hero-cta-button {
            padding: 1.2rem 2.8rem;
            font-size: 1.2rem;
            margin: 0.5rem;
            width: 220px;
        }

        .about-button {
            margin-top: var(--spacing-md);
        }

        .info-card a {
            padding: 0.9rem 1.8rem;
            font-size: 1.05rem;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-sm);
        }

        .gpa-calculator button {
            margin: var(--spacing-sm) 0.6rem;
            padding: 0.9rem 1.6rem;
            font-size: 1rem;
            border-radius: var(--border-radius-sm);
            background: var(--primary-color);
            box-shadow: var(--shadow-sm);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease;
            will-change: transform, box-shadow;
        }

        .gpa-calculator button:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .send-button-wrapper button {
            padding: 1.2rem 3rem;
            font-size: 1.2rem;
            border-radius: var(--border-radius-md);
            background: linear-gradient(135deg, var(--accent-gradient-start) 0%, var(--accent-gradient-end) 100%);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
            will-change: transform, box-shadow;
        }

        .send-options button {
            padding: 0.9rem 1.4rem;
            font-size: 1rem;
            border-radius: var(--border-radius-sm);
            background: var(--secondary-color);
            box-shadow: none;
            margin: 0.4rem auto;
            transition: background-color 0.3s ease;
        }
        .send-options button:hover {
            background-color: var(--primary-color);
            transform: translateY(0);
            box-shadow: none;
        }

        /* --- OLD NAV HIDDEN BY OVERRIDES --- */
        
        /* New Header (Request 1) */
        
        /* New glassy top header */
        .new-main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1100; /* Above content, below mobile menus */
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
            background: linear-gradient(
                135deg,
                rgba(255,255,255,0.16),
                rgba(255,255,255,0.04)
            );
            backdrop-filter: blur(18px) saturate(1.6);
            -webkit-backdrop-filter: blur(18px) saturate(1.6);
            border-bottom: 1px solid rgba(255,255,255,0.75);
            box-shadow: 0 18px 40px rgba(15,23,42,0.18);
            transition:
                transform 0.28s ease,
                background 0.35s ease,
                box-shadow 0.35s ease,
                border-color 0.35s ease;
        }
        .new-main-header.hidden {
            transform: translateY(-110%);
        }
        .new-main-header .new-header-logo-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
            color: var(--primary-color);
        }
        .new-main-header img {
            height: 50px;
            width: 50px;
            border-radius: 50%;
            object-fit: cover;
            box-shadow: 0 8px 20px rgba(15,23,42,0.35);
        }
        .new-main-header h1 {
            font-size: 1.5rem;
            margin: 0;
            font-weight: 700;
        }
        @media (max-width: 767px) {
            body {
                /* Mobile already has bottom padding, top padding is needed */
                padding-top: 77px;
            }
            .new-main-header {
                padding: 0.6rem 1rem;
                border-bottom-left-radius: 18px;
                border-bottom-right-radius: 18px;
            }
            .new-main-header h1 {
                font-size: 1.2rem;
            }
        }
        /* End New Header */

        
        
        /* --- OLD NAV STYLES --- */
        .fixed-logo-menu-toggle {
            position: fixed;
            top: 0;
            right: 0;
            z-index: 1001;
            cursor: pointer;
            width: auto;
            height: 70px;
            border-radius: 0;
            overflow: hidden;
            box-shadow: var(--shadow-md);
            transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, border-color 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            background-color: var(--white);
            display: flex;
            justify-content: flex-end;
            align-items: center;
            border: none;
            padding: 0 var(--spacing-sm);
            box-sizing: border-box;
            will-change: transform, box-shadow, opacity;
        }

        .fixed-logo-menu-toggle img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
            margin-left: 10px;
        }

        .fixed-logo-menu-toggle:hover {
            transform: none;
            box-shadow: var(--shadow-md);
            background-color: var(--white);
            border-color: transparent;
            width: auto;
            padding: 0 15px;
        }

        .fixed-logo-menu-toggle .menu-icon {
            font-size: 2.5rem;
            color: var(--primary-color);
            line-height: 1;
            padding: 5px;
            transition: transform 0.3s ease, color 0.3s ease, opacity 0.3s ease;
            cursor: pointer;
            width: 50px;
            text-align: center;
            opacity: 1;
        }

        .fixed-logo-menu-toggle .menu-text {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary-color);
            opacity: 0;
            width: 0;
            overflow: hidden;
            transition: opacity 0.3s ease, width 0.3s ease;
            white-space: nowrap;
            padding: 5px 0;
        }

        .fixed-logo-menu-toggle:hover .menu-icon {
            opacity: 0;
            width: 0;
            padding: 5px 0;
        }

        .fixed-logo-menu-toggle:hover .menu-text {
            opacity: 1;
            width: auto;
            padding: 5px 10px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .fixed-logo-menu-toggle .header-title-text-mobile {
            display: none;
        }

        .mobile-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 70px;
            background-color: var(--mobile-header-bg);
            backdrop-filter: blur(8px);
            box-shadow: var(--shadow-md);
            z-index: 1000;
            display: flex;
            justify-content: center; /* Center the content */
            align-items: center;
            padding: 0 var(--spacing-sm);
            box-sizing: border-box;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        .mobile-header .header-logo-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mobile-header .header-logo-wrapper img {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 50%;
        }

        .mobile-header .header-logo-wrapper .header-title-text {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin: 0;
            white-space: nowrap;
        }

        .main-nav {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80vw;
            max-width: 280px;
            height: 100%;
            background: var(--nav-bg);
            background-size: 600% 600%;
            animation: gradientBG 6s ease infinite;
            backdrop-filter: blur(10px) saturate(1.5);
            box-shadow: var(--shadow-lg);
            transition: right 0.3s ease, transform 0.3s ease, backdrop-filter 0.3s ease, box-shadow 0.3s ease;
            z-index: 999;
            padding: var(--spacing-lg) var(--spacing-md);
            padding-top: 120px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            border-top-left-radius: var(--border-radius-lg);
            border-bottom-left-radius: var(--border-radius-lg);
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            box-sizing: border-box;
            will-change: right, transform, backdrop-filter, box-shadow;
        }

        .main-nav.active {
            right: 0;
            transform: translateX(0);
        }

        .main-nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            align-items: flex-start;
            width: 100%;
        }

        .main-nav-list li a {
            display: block;
            padding: 1rem 1.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            text-decoration: none;
            color: var(--dark-text);
            border-radius: var(--border-radius-md);
            transition: background-color 0.3s ease, color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
            background-color: transparent;
            box-shadow: none;
            position: relative;
            overflow: hidden;
            width: 100%;
            text-align: right;
            will-change: background-color, color, transform, box-shadow;
        }

        .main-nav-list li a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--primary-color);
            transform: translateX(-100%);
            transition: transform 0.3s ease-out;
            will-change: transform;
        }

        .main-nav-list li a:hover {
            background-color: var(--light-bg);
            color: var(--primary-color);
            transform: translateY(0);
            box-shadow: var(--shadow-sm);
        }

        .main-nav-list li a:hover::after {
            transform: translateX(0);
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            transition: background-color 0.3s ease, backdrop-filter 0.3s ease;
            z-index: 998;
            will-change: background-color, backdrop-filter;
        }
        .overlay.active {
            display: block;
        }

        .desktop-main-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            background-color: var(--desktop-header-bg);
            backdrop-filter: blur(8px);
            box-shadow: var(--shadow-md);
            transition: height 0.3s ease, padding 0.3s ease, background-color 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            z-index: 999;
            padding: 0 40px;
            display: none; /* Hidden by default, shown on desktop */
            flex-direction: row;
            justify-content: center;
            align-items: center;
            width: auto;
            max-width: none;
            will-change: height, padding, background-color, opacity, visibility;
        }

        .desktop-main-header.scrolled {
            height: 0;
            padding: 0;
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .desktop-main-header .header-content-wrapper {
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: gap 0.3s ease;
            will-change: gap;
        }

        .desktop-main-header .header-logo-img {
            height: 70px;
            width: 70px;
            border-radius: 50%;
            object-fit: cover;
            transition: height 0.3s ease, width 0.3s ease;
            will-change: height, width;
        }

        .desktop-main-header .header-title-text {
            font-size: 1.8rem;
            color: var(--primary-color);
            margin: 0;
            transition: font-size 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            white-space: nowrap;
            background: none;
            background-size: auto;
            animation: none;
            backdrop-filter: none;
            border-radius: 0;
            box-shadow: none;
            padding: 0;
            border: none;
            margin-left: 1rem;
            will-change: font-size, opacity, visibility;
        }
        
        /* --- END OLD NAV STYLES --- */


        .hero-section {
            position: relative;
            overflow: hidden;
            color: var(--white);
            padding: 6rem 1rem;
            margin-top: 0;
            min-height: 100vh;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .hero-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: var(--hero-bg-overlay), url('bg-1.jpg');
            background-size: cover;
            background-position: center;
            z-index: 1;
            filter: blur(5px);
            transition: background-image 0.5s ease;
        }

        .hero-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0;
        }

        .hero-cta-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            width: 100%;
            margin-top: 1.5rem;
        }

        .hero-text {
            padding: var(--spacing-md) 1rem;
            border-radius: var(--border-radius-md);
            width: 100%;
            box-sizing: border-box;
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px) saturate(1.5);
            will-change: backdrop-filter;
            text-align: center;
        }

        .highlight-text {
            color: var(--primary-color);
            text-shadow: none;
            font-weight: 700;
        }

        .hero-intro {
            font-size: 1.1rem;
            margin-bottom: var(--spacing-md);
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.95);
            text-align: center;
        }

        .dev-credits {
            font-size: 1rem;
            margin-top: var(--spacing-md);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-sm);
            color: rgba(255, 255, 255, 0.95);
        }

        .dev-avatars {
            display: flex;
            gap: var(--spacing-sm);
        }

        /* --- Avatar Styles (No changes needed, already works) --- */
        .dev-person {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-xs);
            text-decoration: none; /* Make the block the link */
            color: var(--white); /* Move color here */
            transition: transform 0.3s ease; /* Add simple transform for whole block */
            will-change: transform;
        }

        .dev-person:hover {
            transform: scale(1.05); /* Add hover to whole block */
        }

        .dev-person img {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--accent-color);
            box-shadow: var(--shadow-sm);
            transition: box-shadow 0.3s ease; /* Simplify transition */
            will-change: box-shadow;
        }
        
        .dev-person:hover img {
            box-shadow: var(--shadow-lg); /* Enhance shadow on hover */
        }

        .dev-person span { /* Changed from .dev-person a */
            font-size: 1.05rem;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .dev-person:hover span { /* Changed from .dev-person a:hover */
            color: var(--accent-color);
            text-decoration: underline;
        }
        /* --- End Avatar Styles --- */


        .cards-section,
        .about-section,
        .info-cards-section,
        .whatsapp-contact {
            padding: var(--spacing-xl) var(--spacing-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 1400px;
            margin: var(--spacing-md) auto;
            gap: var(--spacing-lg);
            text-align: center;
            background-color: var(--section-bg);
            backdrop-filter: blur(10px) saturate(1.5);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
            border: var(--section-border);
            will-change: transform, opacity, box-shadow, backdrop-filter;
            transition: background-color 0.5s ease, border 0.5s ease;
        }

        .section-header {
            margin-bottom: var(--spacing-lg);
            /* A
        /* Notifications header & filters */
        .notifications-header {
            align-items: flex-start;
            text-align: right;
            gap: var(--spacing-md);
        }

        .notifications-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .notifications-title h2 {
            margin: 0;
        }

        .notif-icon {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-sm);
            font-size: 1.3rem;
        }

        .notifications-filters {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .notif-filter {
            border: none;
            outline: none;
            cursor: pointer;
            padding: 0.35rem 0.8rem;
            border-radius: 999px;
            background: rgba(255, 255, 255, 0.12);
            color: var(--primary-color);
            font-size: 0.85rem;
            font-weight: 600;
            transition: background-color 0.2s ease, transform 0.15s ease;
        }

        .notif-filter:hover {
            transform: translateY(-1px);
            background: rgba(255, 255, 255, 0.22);
        }

        .notif-filter.active {
            background: var(--primary-color);
            color: #fff;
        }

        .notifications-list {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
        }

        .notification-card {
            text-align: right;
        }

        .notification-card h3 {
            font-size: 1.05rem;
            margin-bottom: 0.35rem;
        }

        .notification-card p {
            font-size: 0.9rem;
            margin-bottom: 0.45rem;
        }

        
        .notification-card-header {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 0.5rem;
        }

        .notification-card .notification-meta {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .notification-card .general-button {
            margin-top: 0.35rem;
        }
@media (min-width: 992px) {
            /* على الديسكتوب نخلي الشكل زي الموبايل: كروت تحت بعض */
            #notifications-section .notification-card {
                align-items: flex-start;
                text-align: right;
                min-height: 160px;
            }
        }
nimation properties added via .animated-section .section-header */
        }

        .section-header h2 {
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: var(--spacing-md);
            position: relative;
            display: inline-block;
        }

        .section-header h2::after {
            content: '';
            display: block;
            width: 80%;
            height: 4px;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            margin: 0.5rem auto 0;
            border-radius: 2px;
        }

        .level-card {
            background: linear-gradient(145deg, var(--white) 0%, var(--light-bg) 100%);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-lg);
            text-align: center;
            /* MODIFICATION START: Added opacity, transform, and will-change */
            transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.5s ease, border-color 0.3s ease,
                        opacity 0.5s ease-out, transform 0.5s ease-out;
            opacity: 0;
            transform: translateY(30px);
            /* MODIFICATION END */
            box-sizing: border-box;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            border-left: 6px solid var(--primary-color);
            border-right: 6px solid var(--primary-color);
            margin: 0;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            position: relative;
            overflow: hidden;
            text-decoration: none;
            color: inherit;
            will-change: transform, box-shadow, background, border-color, opacity;
        }

        .level-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: var(--shadow-lg);
            background: linear-gradient(145deg, var(--light-bg) 0%, var(--white) 100%);
            border-color: var(--accent-color);
            opacity: 1 !important; /* Ensure hover state is visible */
        }
        
        /* When visible, override hover transform for animation */
        .animated-section.is-visible .level-card:hover {
             transform: translateY(-10px) scale(1.02);
        }

        .level-card:active {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .level-card:focus-visible {
            outline: 3px solid var(--primary-color);
            outline-offset: 4px;
        }

        .level-card-row {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            width: 100%;
            align-items: center;
        }

        .level-card .icon {
            font-size: 5rem;
            margin-bottom: var(--spacing-md);
            color: var(--primary-color);
            transition: transform 0.3s ease, color 0.3s ease;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            will-change: transform, color;
        }
        .level-card:hover .icon {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        .level-card h3 {
            font-size: 2.2rem;
            color: var(--dark-text);
            margin-bottom: var(--spacing-sm);
        }

        .level-card p {
            font-size: 1.15rem;
            color: var(--medium-text);
            margin-bottom: var(--spacing-md);
        }

        .about-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--spacing-md);
            width: 100%;
        }

        .about-text {
            text-align: center;
            position: relative;
            background-color: transparent;
            border: none;
            padding: 0;
            /* Animation properties added via .animated-section .about-content > .about-text */
        }

        .about-text h2 {
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: var(--spacing-md);
        }

        .about-text p {
            font-size: 1.1rem;
            line-height: 1.7;
            color: var(--medium-text);
            text-align: right;
            padding: 0;
        }

        .about-image {
            display: block;
            width: 100%;
            text-align: center;
            background-color: transparent;
            backdrop-filter: none;
            border-radius: 0;
            padding: 0;
            /* Animation properties added via .animated-section .about-content > .about-image */
        }

        /* --- MODIFICATION START: Image blur fade-in/out --- */
        .about-image img {
            max-width: 95%;
            height: auto;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
            filter: grayscale(50%) blur(5px); /* Start blurred */
            transition: filter 1s ease 0.2s, transform 0.3s ease; /* Transition filter */
            will-change: filter, transform;
        }

        /* Fade in image when section is visible */
        .animated-section.is-visible .about-image img {
             filter: grayscale(0%) blur(0px); /* Fade to clear */
        }

        .about-image img:hover {
            filter: grayscale(0%) blur(0px) brightness(1.05); /* Keep hover effect */
            transform: scale(1.01);
        }
        /* --- MODIFICATION END --- */

        .info-cards-container {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            align-items: center;
        }

        .info-card {
            background-color: var(--white);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            padding: var(--spacing-lg);
            text-align: center;
            /* MODIFICATION START: Added opacity, transform, and will-change */
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease, background-color 0.5s ease,
                        opacity 0.5s ease-out, transform 0.5s ease-out;
            opacity: 0;
            transform: translateY(30px);
            /* MODIFICATION END */
            flex: 1 1 100%;
            max-width: 380px;
            border-top: 5px solid var(--primary-color);
            border-bottom: 5px solid var(--primary-color);
            box-sizing: border-box;
            position: relative;
            overflow: hidden;
            will-change: transform, box-shadow, border-color, opacity;
        }

        .info-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent-color);
            opacity: 1 !important; /* Ensure hover state is visible */
        }
        
        /* When visible, override hover transform for animation */
        .animated-section.is-visible .info-card:hover {
             transform: translateY(-8px);
        }

        .info-card img {
            width: 75px;
            height: auto;
            margin-bottom: var(--spacing-md);
        }

        .info-card h3 {
            font-size: 1.7rem;
            color: var(--primary-color);
            margin-bottom: var(--spacing-sm);
        }

        .info-card p {
            font-size: 1.05rem;
            color: var(--medium-text);
            margin-bottom: var(--spacing-md);
        }

        .gpa-calculator {
            background: var(--section-bg);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-xl);
            max-width: 800px;
            margin: var(--spacing-xl) auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
            border: var(--section-border);
            transition: background-color 0.5s ease, border 0.5s ease;
        }

        .calculator-header {
            margin-bottom: var(--spacing-lg);
            /* Animation properties added via .animated-section .calculator-header */
        }

        .calculator-header h2 {
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .calculator-header p {
            color: var(--medium-text);
            font-size: 1.1rem;
        }

        .modern-courses-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
            /* Animation properties added via .animated-section .modern-courses-container */
        }

        .course-input-row {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            background: var(--white);
            padding: 1.5rem;
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }

        .course-input-row:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .course-input-row input,
        .course-input-row select {
            padding: 1rem;
            font-size: 1rem;
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius-sm);
            background: var(--light-bg);
            color: var(--dark-text);
            transition: all 0.3s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .course-input-row input:focus,
        .course-input-row select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(var(--primary-color), 0.2);
            outline: none;
        }

        .calculator-actions {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
            /* Animation properties added via .animated-section .calculator-actions */
        }

        .modern-calc-button {
            padding: 1rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: var(--border-radius-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .modern-calc-button.primary {
            background: var(--primary-color);
            color: white;
        }

        .modern-calc-button.secondary {
            background: #f0f0f0;
            color: var(--dark-text);
        }

        .modern-calc-button:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .modern-result {
            background: var(--primary-color);
            color: white;
            padding: 1.5rem;
            border-radius: var(--border-radius-md);
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 400px;
            margin: 0 auto;
            /* This fades in on calculate, not with section */
        }

        .result-label {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
        }

        .gpa-calculator h2 {
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: var(--spacing-lg);
        }

        #courses-container {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            text-align: right;
        }

        .input-group label {
            font-size: 0.9rem;
            color: var(--medium-text);
            font-weight: 600;
        }

        .gpa-calculator .remove-course {
            background-color: #dc3545;
            color: var(--white);
            border-radius: var(--border-radius-sm);
            padding: 0.8rem 1.2rem;
            font-size: 0.95rem;
            box-shadow: none;
            align-self: flex-end;
            width: fit-content;
            min-width: unset;
        }

        .gpa-calculator .remove-course:hover {
            background-color: #c82333;
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        #gpa-result {
            margin-top: var(--spacing-lg);
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            background-color: var(--light-bg);
            padding: var(--spacing-md);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-sm);
            display: none;
        }

        .contact-form {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            max-width: 100%;
            margin: 0 auto;
            align-items: center;
        }

        #message {
            width: 100%;
            min-height: 140px;
            padding: var(--spacing-md);
            font-size: 1.05rem;
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius-md);
            background-color: var(--light-bg);
            color: var(--dark-text);
            resize: vertical;
            box-sizing: border-box;
            box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.06);
        }

        .send-button-wrapper {
            position: relative;
            display: flex;
            justify-content: center;
            width: 100%;
        }

        .send-options {
            display: none;
            position: absolute;
            top: calc(100% + 12px);
            background-color: var(--white);
            border: 1px solid var(--border-light);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-md);
            z-index: 10;
            padding: var(--spacing-sm);
            min-width: unset;
            width: 90%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
            animation: fadeIn 0.3s ease-out;
            will-change: opacity, transform;
        }

        .site-footer {
            background: var(--primary-color);
            color: var(--white);
            padding: var(--spacing-xl) var(--spacing-sm);
            margin-top: auto;
            text-align: center;
            border-top-left-radius: var(--border-radius-lg);
            border-top-right-radius: var(--border-radius-lg);
            transition: background-color 0.5s ease;
        }

        .footer-content p {
            font-size: 1rem;
            margin: 0.8rem 0;
            color: rgba(255, 255, 255, 0.9);
        }

        .footer-content .highlight {
            color: var(--accent-color);
            font-weight: 700;
        }

        .footer-content .quote {
            font-size: 1.1rem;
            margin-top: var(--spacing-lg);
            font-style: italic;
            opacity: 0.95;
        }

        .footer-content .copy {
            font-size: 0.85rem;
            margin-top: var(--spacing-md);
            opacity: 0.8;
        }

        .visitor-counter {
            font-size: 0.9rem;
            margin-top: var(--spacing-sm);
            color: rgba(255, 255, 255, 0.7);
        }

        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--light-bg);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out, background-color 0.5s ease;
        }

        #loading-screen img {
            width: 150px;
            height: 150px;
            object-fit: cover;
            border-radius: 50%;
            animation: spin 2s linear infinite;
        }

        #loading-screen .loading-text {
            margin-top: 20px;
            font-size: 1.5rem;
            color: var(--primary-color);
            font-weight: 700;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-screen-hidden {
            opacity: 0 !important;
            visibility: hidden !important;
            pointer-events: none;
        }


        @media (min-width: 768px) {
            .mobile-header {
                display: none;
            }

            /* --- MODIFICATION START: Floating menu animation --- */
            .fixed-logo-menu-toggle {
                display: none; /* Hidden by default on desktop */
                opacity: 0;
                visibility: hidden;
                transform: translateY(100px); /* Start 100px down */
                /* Add transition here */
                transition: transform 0.4s cubic-bezier(0.2, 0.9, 0.25, 1),
                            opacity 0.3s ease,
                            visibility 0.3s ease,
                            box-shadow 0.3s ease;
                will-change: transform, opacity;
            }
            .fixed-logo-menu-toggle.scrolled-active {
                display: flex;
                opacity: 1;
                visibility: visible;
                transform: translateY(0); /* Animate to final position */
                bottom: 20px;
                right: 20px;
                top: auto;
                width: 70px; /* Set fixed width for logo only */
                height: 70px;
                border-radius: 35px;
                padding: 0 10px; /* Adjust padding for centered logo */
                justify-content: center; /* Center the logo */
                border: 2px solid var(--primary-color);
                flex-direction: row;
                gap: 0; /* No gap by default */
                transition: transform 0.4s cubic-bezier(0.2, 0.9, 0.25, 1),
                            opacity 0.3s ease,
                            visibility 0.3s ease,
                            box-shadow 0.3s ease,
                            width 0.4s cubic-bezier(0.2, 0.9, 0.25, 1), /* Add width transition */
                            padding 0.4s cubic-bezier(0.2, 0.9, 0.25, 1), /* Add padding transition */
                            gap 0.4s ease; /* Add gap transition */
                will-change: transform, opacity, width, padding, gap;
            }

            .fixed-logo-menu-toggle.scrolled-active:hover {
                width: auto; /* Expand width on hover */
                padding: 0 15px; /* Add padding back */
                justify-content: flex-end; /* Align to end */
                gap: 10px; /* Add gap back */
            }

            .fixed-logo-menu-toggle.scrolled-active img {
                width: 50px;
                height: 50px;
                margin: 0;
                transition: width 0.3s ease, height 0.3s ease;
            }
            .fixed-logo-menu-toggle.scrolled-active .header-title-text-mobile {
                display: none;
            }
            .fixed-logo-menu-toggle.scrolled-active .menu-icon {
                display: none; /* Hide hamburger icon completely */
                width: 0;
                opacity: 0;
            }

            /* This rule hides the text by default on the scrolled button */
            .fixed-logo-menu-toggle.scrolled-active .menu-text {
                opacity: 0;
                width: 0;
                overflow: hidden;
                transition: opacity 0.3s ease, width 0.3s ease 0.1s;
                white-space: nowrap;
                padding: 5px 0;
                font-size: 1.5rem;
                font-weight: 600;
                color: var(--primary-color);
            }

            .fixed-logo-menu-toggle.scrolled-active:hover .menu-icon {
                opacity: 0;
                width: 0;
                display: none;
            }
            .fixed-logo-menu-toggle.scrolled-active:hover .menu-text {
                opacity: 1;
                width: auto;
                padding: 5px 10px;
            }

            .fixed-logo-menu-toggle.menu-active {
                opacity: 0;
                visibility: hidden;
                pointer-events: none;
                transform: translateY(100px); /* Hide it again when menu is active */
            }
            /* --- MODIFICATION END --- */


            .desktop-main-header {
                display: flex; /* Show desktop header */
            }

            .main-nav {
                width: 300px;
                padding-top: var(--spacing-lg);
                right: -300px;
                background: var(--nav-bg);
                background-size: 600% 600%;
                animation: gradientBG 6s ease infinite;
                backdrop-filter: blur(10px) saturate(1.5);
                box-shadow: var(--shadow-lg);
                transition: right 0.3s ease, transform 0.3s ease, backdrop-filter 0.3s ease, box-shadow 0.3s ease;
            }
            .main-nav.active {
                right: 0;
                transform: translateX(0);
            }

            .main-nav-list {
                flex-direction: column;
                gap: var(--spacing-sm);
                align-items: flex-start;
            }

            .main-nav-list li a {
                padding: 1rem 1.5rem;
                font-size: 1.1rem;
                text-align: right;
                border-radius: var(--border-radius-md);
            }

            .main-nav-list li a:hover {
                background-color: var(--light-bg);
                box-shadow: var(--shadow-sm);
            }

            .overlay {
                display: none;
            }
            .overlay.active {
                display: block;
            }

            body {
                /* padding-top: 0; */ /* Removed, now handled by new header */
            }

            main {
                margin-top: 0; /* Removed, now handled by new header */
                transition: margin-top 0.3s ease;
            }
            main.scrolled {
                margin-top: 0;
            }

            .hero-section {
                padding: 5.5rem var(--spacing-xl);
                min-height: calc(100vh - 100px);
            }
            .hero-content {
                flex-direction: column;
                gap: 3.5rem;
            }
            .hero-text {
                width: 100%;
                text-align: center;
            }
            .hero-text h1 {
                font-size: 3.2rem;
                margin-bottom: var(--spacing-md);
                line-height: 1.2;
            }
            .hero-intro {
                font-size: 1.25rem;
                margin-bottom: var(--spacing-lg);
            }
            .hero-cta-button {
                padding: 1.3rem 3.5rem;
                font-size: 1.4rem;
                margin-bottom: var(--spacing-lg);
            }
            .dev-credits {
                flex-direction: row;
                gap: var(--spacing-md);
                margin-top: var(--spacing-lg);
                justify-content: center;
            }
            .dev-person img {
                width: 80px;
                height: 80px;
                border: 5px solid var(--accent-color);
            }

            .cards-section,
            .info-cards-section {
                padding: var(--spacing-xl) var(--spacing-md);
                gap: var(--spacing-lg);
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            .level-card {
                flex: 1 1 auto;
                max-width: 380px;
            }

            .level-card-row {
                flex-direction: row;
                justify-content: center;
                width: auto;
                max-width: 800px;
            }
            .level-card-row .level-card {
                flex: 1 1 calc(50% - var(--spacing-md) / 2);
                max-width: none;
            }
            .level-card .icon {
                font-size: 5rem;
            }
            .level-card h3 {
                font-size: 2.2rem;
            }
            .level-card p {
                font-size: 1.2rem;
            }

            .about-content {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: var(--spacing-xl);
            }
            .about-text {
                grid-column: 1 / 2;
                border-left: none;
                padding-left: 0;
                border-right: none;
                padding-right: 0;
            }
            .about-image {
                grid-column: 2 / 3;
            }
            .about-text p {
                font-size: 1.2rem;
                padding: 0;
            }
            .about-button {
                font-size: 1.2rem;
            }
            .about-image img {
                max-width: 500px;
            }

            .info-cards-container {
                flex-direction: row;
                justify-content: center;
                flex-wrap: wrap;
            }
            /* --- MODIFICATION: Fixed tablet alignment by setting flex-grow to 0 --- */
            .info-cards-container .info-card {
                flex: 0 1 calc(33.333% - (2 * var(--spacing-md) / 3)); /* CHANGED flex-grow to 0 */
                padding: var(--spacing-lg);
                max-width: 400px;
            }
            .info-card img {
                width: 85px;
            }
            .info-card h3 {
                font-size: 2rem;
            }
            .info-card p {
                font-size: 1.15rem;
            }
            .info-card a {
                padding: 1rem 2rem;
                font-size: 1.1rem;
            }

            .gpa-calculator {
                padding: var(--spacing-xl) 4rem;
                max-width: 850px;
            }
            .gpa-calculator h2 {
                font-size: 2.5rem;
                margin-bottom: var(--spacing-lg);
            }
            .course-input-row {
                flex-direction: row;
                gap: var(--spacing-md);
                justify-content: space-between;
                align-items: center;
            }
            .course-input-row input, .course-input-row select {
                padding: 1.2rem;
                font-size: 1.15rem;
                flex: 1;
            }
            .course-input-row input[type="text"] {
                flex: 2;
            }
            .gpa-calculator button {
                padding: 1.2rem 2.5rem;
                font-size: 1.15rem;
            }
            #gpa-result {
                font-size: 2.2rem;
            }

            .whatsapp-contact {
                padding: var(--spacing-xl) var(--spacing-md);
            }
            .contact-form {
                display: flex;
                flex-direction: row;
                max-width: 750px;
                justify-content: center;
            }
            #message {
                width: 100%;
                min-height: 90px;
                padding: var(--spacing-sm) var(--spacing-md);
            }
            .send-button-wrapper {
                position: relative;
                display: flex;
                justify-content: center;
                width: 100%;
            }
            .send-options {
                left: auto;
                right: 0;
                transform: translateX(0);
                top: 100%;
                margin-top: 12px;
                width: auto;
            }
            .send-options button {
                padding: 1rem 1.5rem;
                font-size: 1.05rem;
                width: auto;
            }
        }

        @media (min-width: 1024px) {
            .desktop-main-header,
            .hero-section,
            .about-section,
            .gpa-calculator,
            .whatsapp-contact,
            .cards-section .container,
            .info-cards-section .container {
                max-width: 1500px;
                margin-left: auto;
                margin-right: auto;
            }

            .hero-section {
                padding: 6.5rem var(--spacing-xl);
            }
            .hero-text h1 {
                font-size: 4rem;
            }
            .level-card-row {
                max-width: 800px;
                display: flex;
                justify-content: center;
                flex-wrap: wrap;
                gap: var(--spacing-md);
            }
            .level-card-row a {
                flex: 0 1 calc(50% - var(--spacing-md) / 2);
            }
        }

        @media (max-width: 480px) {
            .hero-section {
                padding: 4rem 0.5rem;
            }
            .hero-text {
                padding: var(--spacing-sm) 0.5rem;
            }
            .hero-text h1 {
                font-size: 1.8rem;
                margin-bottom: 1rem;
            }
            .hero-intro {
                font-size: 0.95rem;
                margin-bottom: var(--spacing-sm);
            }
            .hero-cta-button {
                padding: 1rem 2rem;
                font-size: 1.05rem;
                width: 100%;
                min-width: unset;
            }
            .dev-person img {
                width: 55px;
                height: 55px;
            }
            .dev-person span { /* Changed from a */
                font-size: 0.95rem;
            }
            .dev-credits {
                gap: var(--spacing-xs);
            }
        }

        main.blurred {
            filter: blur(5px);
            transition: filter 0.3s ease;
            pointer-events: none;
        }

        .favorite-icon {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.2s ease, color 0.2s ease;
            z-index: 10;
        }
        .favorite-icon:hover {
            transform: scale(1.2);
        }
        .level-card.favorited .favorite-icon,
        .info-card.favorited .favorite-icon {
            color: #FF69B4;
        }

        .favorite-section {
            display: none;
            margin-bottom: var(--spacing-lg);
            padding: var(--spacing-xl) var(--spacing-sm);
            background: transparent;
            border: none;
            box-shadow: none;
            text-align: center;
        }

        .favorite-section .card-group {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-md);
            justify-content: center;
            background-color: var(--light-bg);
            border-radius: var(--border-radius-md);
            padding: var(--spacing-md);
            transition: background-color 0.5s ease;
        }

        .section-heading {
            text-align: center;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: var(--spacing-md);
        }

        .remove-favorite {
            background-color: #dc3545;
            color: var(--white);
            border-radius: var(--border-radius-sm);
            padding: 0.8rem 1.2rem;
            font-size: 0.95rem;
            box-shadow: none;
            align-self: center;
            width: fit-content;
            min-width: unset;
            margin-top: var(--spacing-sm);
        }

        .remove-favorite:hover {
            background-color: #c82333;
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }


        .favorite-mini-card {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--white);
            border-radius: 8px;
            padding: 4px 8px;
            margin-bottom: 6px;
        }
        .favorite-mini-card img.fav-img {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            object-fit: cover;
        }
        .favorite-mini-card .fav-title {
            font-size: 14px;
            color: var(--dark-text);
            flex-grow: 1;
        }
        .favorite-mini-card .remove-favorite-btn {
            background: transparent;
            border: none;
            color: red;
            font-size: 16px;
            cursor: pointer;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideOutRight {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
        }

        .main-nav.active {
            right: 0;
            transform: translateX(0);
            animation: slideInRight 0.4s ease-out forwards;
        }

        .main-nav:not(.active) {
            animation: slideOutRight 0.4s ease-in forwards;
        }

        .main-nav-list li {
            opacity: 0;
            transform: translateX(20px);
            animation: fadeInListItem 0.3s ease-out forwards;
        }

        .main-nav.active .main-nav-list li:nth-child(1) { animation-delay: 0.1s; }
        .main-nav.active .main-nav-list li:nth-child(2) { animation-delay: 0.15s; }
        .main-nav.active .main-nav-list li:nth-child(3) { animation-delay: 0.2s; }
        .main-nav.active .main-nav-list li:nth-child(4) { animation-delay: 0.25s; }
        .main-nav.active .main-nav-list li:nth-child(5) { animation-delay: 0.3s; }
        .main-nav.active .main-nav-list li:nth-child(6) { animation-delay: 0.35s; }
        .main-nav.active .main-nav-list li:nth-child(7) { animation-delay: 0.4s; }
        .main-nav.active .main-nav-list li:nth-child(8) { animation-delay: 0.45s; }

        @keyframes fadeInListItem {
            from { opacity: 0; transform: translateX(20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .hero-cta-button.pulse-grow {
            animation: pulseGrow 2s infinite;
        }

        @keyframes pulseGrow {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(72, 187, 120, 0.7); }
            70% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(72, 187, 120, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(72, 187, 120, 0); }
        }


        @media (max-width: 767px) {
        .mobile-header {
            display: flex;
        }
        .desktop-main-header,
        .fixed-logo-menu-toggle {
            display: none !important;
        }
        /* body {
            padding-top: 70px;
        } */ /* Handled by new header style */
        main {
            margin-top: 0;
        }
        .main-nav {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80vw;
            max-width: 280px;
            height: 100%;
            background: var(--nav-bg);
            background-size: 600% 600%;
            animation: gradientBG 6s ease infinite;
            backdrop-filter: blur(10px) saturate(1.5);
            box-shadow: var(--shadow-lg);
            transition: right 0.3s ease, transform 0.3s ease, backdrop-filter 0.3s ease, box-shadow 0.3s ease;
            z-index: 999;
            padding: var(--spacing-lg) var(--spacing-md);
            padding-top: 120px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            border-top-left-radius: var(--border-radius-lg);
            border-bottom-left-radius: var(--border-radius-lg);
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            box-sizing: border-box;
            will-change: right, transform, backdrop-filter, box-shadow;
        }

        .main-nav.active {
            right: 0;
            transform: translateX(0);
        }

        .main-nav-list {
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
            gap: var(--spacing-sm);
            width: 100%;
        }

        .main-nav-list li a {
            width: 100%;
            text-align: right;
            background: transparent;
            box-shadow: none;
            padding: 1rem 1.5rem;
        }

        .overlay {
            display: none;
        }
        .overlay.active {
            display: block;
        }

        body.blurred {
            filter: none !important;
            overflow: hidden;
        }

        .hero-cta-button {
            animation: none !important;
        }
        }

@media (max-width: 767px) {

  body {
    font-size: 0.95rem;
    padding-bottom: 92px;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
  }

  section {
    padding: 1.2rem 0.9rem !important;
  }

  .mobile-header {
    height: 64px;
    padding: 0 12px;
  }
  .mobile-header .header-logo-wrapper img {
    width: 40px;
    height: 40px;
  }
  .mobile-header .header-title-text {
    font-size: 1.05rem;
  }

  .header-hidden { opacity: 0 !important; pointer-events: none; transition: opacity 0.28s ease; }

  .general-button {
    width: 92%;
    display: block;
    margin: 0.5rem auto !important;
    border-radius: 9999px !important;
    padding: 0.9rem 1rem !important;
    font-size: 1rem !important;
    min-width: 0 !important;
  }

  .hero-cta-buttons { gap: 0.6rem; flex-direction: column; align-items: center; }
  .hero-cta-button { width: 92%; min-width: unset; padding: 0.9rem 1rem; }

  img, video, iframe { max-width: 100%; height: auto; }

  input, select, textarea, button { -webkit-tap-highlight-color: transparent; }

  .main-nav {
    right: 0 !important;
    left: 0;
    bottom: -100%;
    top: auto;
    width: 100%;
    max-width: none;
    height: 60vh;
    padding: 1.25rem;
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    transform: translateY(100%);
    /* --- MODIFICATION START: Apple-like transition (closing) --- */
    transition: transform 350ms cubic-bezier(0.25, 0.1, 0.25, 1), box-shadow 200ms ease;
    /* --- MODIFICATION END --- */
    will-change: transform;
    z-index: 1400; /* Increased z-index */
    align-items: flex-start;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    background: var(--nav-bg);
  }
  .main-nav.active {
    transform: translateY(0);
    bottom: 0;
    /* --- MODIFICATION START: Apple-like transition (opening bounce) --- */
    transition: transform 450ms cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 200ms ease;
    /* --- MODIFICATION END --- */
  }

  /* --- NEW 2x2 GRID LAYOUT FOR MOBILE MENU --- */
  .main-nav-list {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--spacing-sm);
    width: 100%;
    padding: 0;
    list-style: none;
    align-items: stretch;
  }

  .main-nav-list li {
    width: 100%;
  }

  .main-nav-list li a {
    padding: 0.9rem 1rem;
    font-size: 1rem;
    border-radius: 12px;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    box-sizing: border-box;
  }

  .overlay {
    display: none;
  }
  .overlay.active {
    display: block;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.45);
    backdrop-filter: blur(4px);
    z-index: 1399; /* Below the menu, above everything else */
  }

  .bottom-nav {
    position: fixed;
    left: 50%;
    transform: translateX(-50%);
    bottom: 12px;
    width: calc(100% - 28px);
    max-width: 720px;
    height: 66px;
    border-radius: 16px;
    display: flex;
    gap: 6px;
    z-index: 1500;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    box-sizing: border-box;
    backdrop-filter: blur(10px) saturate(1.1);
    -webkit-backdrop-filter: blur(10px) saturate(1.1);
    background: linear-gradient(180deg, rgba(255,255,255,0.70), rgba(255,255,255,0.40));
    box-shadow: 0 10px 30px rgba(0,0,0,0.18);
    transition: transform 0.36s cubic-bezier(.2,.9,.2,1), opacity 0.28s ease;
    will-change: transform, opacity;
    pointer-events: auto;
  }

  .bottom-nav.hidden { transform: translateX(-50%) translateY(120%); opacity: 0; pointer-events: none; }

  .bottom-nav .nav-item {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 3px;
    flex: 1 1 0;
    min-width: 0;
    text-decoration: none;
    color: var(--dark-text);
    font-weight: 600;
    font-size: 12px;
    padding: 6px 6px;
    border-radius: 12px;
    transition: transform 0.18s ease;
  }

  
  .bottom-nav .nav-item .notif-badge {
    min-width: 18px;
    height: 18px;
    padding: 0 4px;
    border-radius: 999px;
    background: #e53935;
    color: #fff;
    font-size: 10px;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: -6px;
    right: -2px;
    box-shadow: 0 0 0 2px rgba(15, 23, 42, 0.85);
  }
.bottom-nav .nav-item svg { width: 22px; height: 22px; fill: var(--primary-color); }

  .bottom-nav .nav-item:active { transform: scale(0.96); }

  .bottom-nav .nav-item.active svg,
  .bottom-nav .nav-item.active .label { fill: #096a09; color: #096a09; transform: translateY(-2px); }

  @keyframes bottomBounceIn {
    0% { transform: translateX(-50%) translateY(140%); opacity: 0; }
    60% { transform: translateX(-50%) translateY(-6%); opacity: 1; }
    100% { transform: translateX(-50%) translateY(0); opacity: 1; }
  }
  .bottom-nav.bounce-in { animation: bottomBounceIn 520ms cubic-bezier(.2,.9,.3,1) both; }

  @media (max-width: 360px) {
    .bottom-nav { height: 72px; padding: 10px; border-radius: 18px; }
    .bottom-nav .nav-item svg { width: 24px; height: 24px; }
    .bottom-nav .nav-item .label { font-size: 13px; }
  }

  /* Make nav 'more' button blend in */
  .bottom-nav button.nav-item {
      background: transparent;
      border: none;
      cursor: pointer;
  }

  /* Compact level cards layout */
  .cards-section .level-card-row {
    flex-direction: row;
    gap: var(--spacing-sm);
    width: 100%;
  }

  .cards-section .level-card {
      padding: var(--spacing-md);
      min-height: auto;
  }

  .cards-section .level-card h3 {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
  }

  .cards-section .level-card p {
      font-size: 0.8rem;
      line-height: 1.5;
      margin-bottom: var(--spacing-sm);
  }

  .cards-section .level-card .icon {
      font-size: 3rem;
      margin-bottom: var(--spacing-sm);
  }

}



/* Fix full-screen height on mobile (Android + iOS) */
:root {
    --vh: 1vh;
}

body {
    min-height: calc(var(--vh, 1vh) * 100);
}



        /* --- Glassy Notifications Override --- */
        .notifications-list {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            max-width: 900px;
            margin-inline: auto;
        }

        .info-cards-section#notifications-section .info-cards-container {
            justify-content: center;
        }

        .info-card.notification-card {
            background: linear-gradient(
                135deg,
                rgba(255,255,255,0.92),
                rgba(255,255,255,0.76)
            );
            border-radius: 18px;
            border: 1px solid rgba(255,255,255,0.9);
            box-shadow: 0 18px 45px rgba(15,23,42,0.12);
            backdrop-filter: blur(16px) saturate(1.35);
            -webkit-backdrop-filter: blur(16px) saturate(1.35);
            text-align: right;
        }

        .notification-card-header {
            display: flex;
            align-items: flex-start;
            gap: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .notification-card h3 {
            font-size: 1rem;
            margin-bottom: 0.35rem;
        }

        .notification-card p {
            font-size: 0.9rem;
            margin-bottom: 0.45rem;
        }

        .notification-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.35rem 0.75rem;
            font-size: 0.78rem;
            opacity: 0.8;
        }

        .notification-level-badge {
            padding: 0.15rem 0.55rem;
            border-radius: 999px;
            font-weight: 600;
            font-size: 0.72rem;
            background: rgba(26,116,26,0.09);
            color: #1A741A;
        }

        @media (min-width: 992px) {
            .notifications-section .notification-card {
                align-items: flex-start;
                text-align: right;
                min-height: 160px;
            }
        }
</style>
    
    <!-- START: NEW NAVIGATION OVERRIDE RULES -->
    <style id="nav-overrides">
        /* --- GLOBAL NAV OVERRIDES --- */

        /* 1. Hide ALL original/unwanted nav elements */
        #mobile-header,
        #fixed-logo-menu-toggle,
        #desktop-main-header,
        nav.main-nav[id="main-nav"], /* Target original sidebar */
        nav.bottom-nav[id="bottom-nav"], /* Target first mobile dock */
        #intro-logo /* Hide the distracting intro logo animation */
        {
            display: none !important;
        }
        
        /* === DESKTOP RULES === */
        @media (min-width: 768px) {
            /* 2. Hide ALL MOBILE nav elements on desktop */
            #bottomNav, /* iPhone-style dock */
            #mainNav   /* iPhone-style menu */
            /* MOD: Removed #backToTop from this list */ {
                display: none !important;
            }

            /* 3. Ensure glossy desktop nav (#bottomNavbar) is VISIBLE on DESKTOP */
            #bottomNavbar {
                display: flex !important;
            }
            
            /* 4. Adjust body padding for fixed top bars being removed */
            /* body {
                padding-top: 0 !important;
            } */ /* Now handled by new header */
            main {
                /* Add top margin to account for removed header */
                margin-top: 0 !important; /* Now handled by new header */
            }
        }
        
        /* === MOBILE RULES === */
        @media (max-width: 767px) {
            /* 2. Hide glossy desktop nav (#bottomNavbar) on MOBILE */
            #bottomNavbar {
                display: none !important;
            }

            /* 3. Ensure iPhone-style dock (#bottomNav) is VISIBLE on MOBILE */
            /* Its own script handles show/hide on scroll, so just ensure it's 'flex' */
            #bottomNav {
                display: flex !important;
            }
            
            /* 4. Adjust body padding for fixed top bars being removed */
            /* body {
                padding-top: 0 !important;
            } */ /* Now handled by new header */
            main {
                 /* Add top margin to account for removed header */
                margin-top: 0 !important; /* Now handled by new header */
            }
            
            /* 5. Ensure the correct overlay (for #mainNav) is used */
            .overlay[id="overlay"] {
                z-index: 1399 !important;
            }
        }
    </style>
    <!-- END: NEW NAVIGATION OVERRIDE RULES -->

    <!-- MODIFICATION: Added styles for new header and nav bar -->
    <style>
        .new-main-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: var(--white);
            box-shadow: var(--shadow-md);
            z-index: 1100; /* Above content, below mobile menus */
            transition: transform 0.3s ease-out;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .new-main-header.hidden {
            transform: translateY(-100%);
        }
        .new-main-header .new-header-logo-link {
            display: flex;
            align-items: center;
            gap: 1rem;
            text-decoration: none;
            color: var(--primary-color);
        }
        .new-main-header img {
            height: 50px;
            width: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        .new-main-header h1 {
            font-size: 1.5rem;
            margin: 0;
            font-weight: 700;
        }

        /* Desktop nav bar modifications */
        .bottom-navbar {
            /* MOD: Change position from top to bottom */
            position: fixed;
            bottom: 20px; /* ADDED */
            /* top: 0; */ /* REMOVED */
            left: 50%;
            /* MOD: Start hidden at the bottom */
            transform: translateX(-50%) translateY(150%); /* CHANGED */
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            background: rgba(255,255,255,0.4);
            backdrop-filter: blur(20px) saturate(1.5);
            box-shadow: 0 -2px 20px rgba(0,0,0,0.15), inset 0 1px rgba(255,255,255,0.6);
            border-radius: 40px;
            padding: 0.75rem 1.5rem;
            /* MOD: Add transform to transition */
            transition: transform 0.4s cubic-bezier(.2,.9,.3,1), opacity .3s, box-shadow 0.3s ease, padding 0.5s ease;
            z-index: 1101; /* Higher than new-main-header */
        }
        /* MOD: Class to show desktop nav */
        .bottom-navbar.visible {
            transform: translateX(-50%) translateY(0); /* Slide in from bottom */ /* CHANGED */
        }

        .bottom-navbar:hover {
            padding: 0.75rem 3rem;
            box-shadow: 0 -3px 30px rgba(0,0,0,0.25), inset 0 2px rgba(255,255,255,0.8);
        }
        
        /* --- MODIFICATION: Styles for "Menu" text (Always Visible) --- */
        .bottom-navbar .nav-logo-text {
            color: #1A741A;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.05rem;
            position: relative;
            opacity: 1; /* CHANGED */
            max-width: 100px; /* CHANGED */
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            white-space: nowrap;
            margin-right: 0.5rem; /* CHANGED */
        }
        .bottom-navbar:hover #navLogoLink .nav-logo-text,
        .bottom-navbar.active #navLogoLink .nav-logo-text {
            /* This rule is no longer needed as text is always visible */
        }
        /* MOD: Ensure logo link is flex */
        .bottom-navbar #navLogoLink {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        /* --- END MODIFICATION --- */


        @media (max-width: 767px) {
            body {
                /* Mobile already has bottom padding, top padding is needed */
                padding-top: 77px;
            }
            .new-main-header h1 {
                font-size: 1.2rem;
            }
        }
    </style>

    </head>
    <body>
        <div id="loading-screen">
            <img src="logo.png" alt="Loading Logo"> <!-- MOD: logo.png -->
            <div class="loading-text">Loading...</div>
        </div>

        <!-- MOD: ADDED NEW HEADER -->
        <header class="new-main-header" id="new-main-header">
            <a href="#home" class="new-header-logo-link" aria-label="العودة للأعلى">
                <img src="logo.png" alt="شعار القسم"> <!-- MOD: logo.png -->
                <h1>Mechatronics Data</h1>
            </a>
        </header>

        <!-- MOD: DELETED OLD, HIDDEN NAV ELEMENTS -->
        <!-- <header class="mobile-header" id="mobile-header">...</header> -->
        <!-- <div class="fixed-logo-menu-toggle" id="fixed-logo-menu-toggle">...</div> -->
        <!-- <header class="desktop-main-header" id="desktop-main-header">...</header> -->
        <!-- <nav class="main-nav" id="main-nav">...</nav> -->

<main>


    <section class="hero-section animated-section" id="home">
        <div class="hero-bg"></div>
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <h1>مرحباً بك في موقع لمساعدة طلاب <span class="highlight-text">جامعة الزقازيق الأهلية</span><br>كلية الهندسة - قسم <span class="highlight-text">ميكاترونكس</span></h1>
                    <p class="hero-intro">
                        هنا ستجد كل ما تحتاجه لتسهيل رحلتك التعليمية في القسم، من المناهج الدراسية إلى حاسبة المعدل التراكمي والمزيد.
                    </p>
                </div>
                <div class="hero-cta-buttons">
                    <a href="New folder/opp.html" class="general-button hero-cta-button">دليلك للميكاترونكس</a>
                    <a href="research.html" class="general-button hero-cta-button">ابحث عن المادة</a>
                </div>
                <!-- --- Clickable Avatars (Already working) --- -->
                <div class="dev-credits">
                    <span>تم التطوير بواسطة:</span>
                    <div class="dev-avatars">
                        <a href="https://www.linkedin.com/in/mohamed-mohamed-atia-57138b360/" target="_blank" class="dev-person">
                            <img src="mohamed.jpg" alt="Mohamed">
                            <span>محمد عطية</span>
                        </a>
                        <a href="https://www.linkedin.com/in/moaaz-mohamed-elghamry-164a00303" target="_blank" class="dev-person">
                            <img src="moaaz.jpg" alt="Moaaz">
                            <span>معاذ الغمري</span>
                        </a>
                        <a href="https://www.linkedin.com/in/mohamed-ahmed-romy-811198323?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=android_app" target="_blank" class="dev-person">
                            <img src="romy.jpg" alt="Romy">
                            <span>محمد الرومي</span>
                        </a>
                    </div>
                </div>
                <!-- --- End Clickable Avatars --- -->
            </div>
        </div>
    </section>
     <section class="favorite-section container animated-section" id="favorite-section">
        <h2 class="section-heading">المفضلة</h2>
        <div class="card-group" id="favorite-cards-container"></div>
    </section>

    <section class="about-section container animated-section" id="about-section">
        <div class="about-content">
            <div class="about-text">
                <div class="section-header">
                    <h2>عن قسم الميكاترونكس</h2>
                </div>
                <p>
                    قسم الميكاترونكس في جامعة الزقازيق الأهلية يجمع بين الهندسة الميكاترونيات، الإلكترونيات، وعلوم الحاسب لتصميم أنظمة ذكية ومتكاملة. نهدف إلى تخريج مهندسين قادرين على الابتكار في مجالات الروبوتات، الأنظمة الذكية، والأتمتة الصناعية.
                </p>
                <p>
                    نقدم بيئة تعليمية متطورة، معامل مجهزة بأحدث التقنيات، وأساتذة متخصصين لضمان حصول طلابنا على أفضل تعليم وتدريب عملي يؤهلهم لسوق العمل المتغير باستمرار.
                </p>
                <a href="Taxt.html" class="about-button general-button">اعرف المزيد عن القسم</a>
            </div>
            <div class="about-image">
                <img src="Mechatronics-Graph-1.png" alt="صورة عن قسم الميكاترونكس">
            </div>
        </div>
    </section>

    <section class="cards-section container animated-section" id="cards-section">
        <div class="section-header">
            <h2>اختر المستوي:</h2>
        </div>
        <a href="level000.html" class="level-card" data-card-id="level-000">
            <span class="favorite-icon">🤍</span>
            <div>
                <div class="icon">🧱</div>
                <h3>المستوى 000</h3>
                <p>لائحة المواد الأساسية للسنة التحضيرية</p>
            </div>
        </a>

        <div class="level-card-row">
            <a href="level100.html" class="level-card" data-card-id="level-100">
                <span class="favorite-icon">🤍</span>
                <div>
                    <div class="icon">⚙️</div>
                    <h3>المستوى 100</h3>
                    <p>مناهج وموارد للمستوى الأول في القسم.</p>
                </div>
            </a>

            <a href="level200.html" class="level-card" data-card-id="level-200">
                <span class="favorite-icon">🤍</span>
                <div>
                    <div class="icon">💡</div>
                    <h3>المستوى 200</h3>
                    <p>مناهج وموارد للمستوى الثاني في القسم.</p>
                </div>
            </a>
        </div>

        <div class="level-card-row">
            <a href="level300.html" class="level-card" data-card-id="level-300">
                <span class="favorite-icon">🤍</span>
                <div>
                    <div class="icon">🤖</div>
                    <h3>المستوى 300</h3>
                    <p>مناهج وموارد للمستوى الثالث في القسم.</p>
                </div>
            </a>

            <a href="level400.html" class="level-card" data-card-id="level-400">
                <span class="favorite-icon">🤍</span>
                <div>
                    <div class="icon">🚀</div>
                    <h3>المستوى 400</h3>
                    <p>مناهج وموارد للمستوى الرابع في القسم.</p>
                </div>
            </a>
        </div>
    </section>
    <section class="cards-section container animated-section" id="extras-section">
        <div class="section-header">
            <h2 class="section-heading">مصادر تعليمية</h2>
        </div>
        <div class="level-card-row">
            <a href="New folder/basic-software.html" class="level-card" data-card-id="extras-software">
                <span class="favorite-icon">🤍</span>
                <div class="icon mech-icon">💻</div>
                <h3>برامج أساسية</h3>
                <p>برامج الكمبيوتر الهندسية المفيدة ومصادرها</p>
            </a>
            <a href="New folder/online-courses.html" class="level-card" data-card-id="extras-courses">
                <span class="favorite-icon">🤍</span>
                <div class="icon mech-icon">🌐</div>
                <h3>كورسات أونلاين</h3>
                <p> منصات وقنوات يوتيوب تعليمية مفيدة</p>
            </a>
        </div>
    </section>
    <section class="info-cards-section container animated-section" id="info-cards-section">
        <div class="section-header">
            <h2>المزيد من المعلومات:</h2>
        </div>
        <div class="info-cards-container">
            <div class="info-card" data-card-id="info-prereq">
                <span class="favorite-icon">🤍</span>
                <img src="prerequisite-icon.png" alt="مواد تعتمد علي أخري">
                <h3>مواد تعتمد علي أخري</h3>
                <p>اكتشف المواد اللي بتقفل مواد تانية لفهم التسلسل الدراسي.</p>
                <a href="map.html" class="general-button">عرض العلاقات</a>
            </div>
            <div class="info-card" data-card-id="info-plan">
                <span class="favorite-icon">🤍</span>
                <img src="plan-icon.png" alt="خطة الدراسة الكاملة">
                <h3>خطة الدراسة الكاملة</h3>
                <p>تعرّف على كل المواد التي ستدرسها على مدار 5 سنوات.</p>
                <a href="semester.html" class="general-button">تصفح المواد</a>
            </div>
            <div class="info-card" data-card-id="info-section">
                <span class="favorite-icon">🤍</span>
                <img src="plan.png" alt="اللائحة">
                <h3>لائحة القسم</h3>
                <p>تفاصيل مواد ولوائح الدراسة والمقررات الرسمية.</p>
                <a href="Section.html" class="general-button">مشاهدة اللائحة</a>
            </div>
            <div class="info-card" data-card-id="info-faq">
                <span class="favorite-icon">🤍</span>
                <img src="faq-icon.png" alt="الأسئلة الشائعة">
                <h3>الأسئلة الشائعة</h3>
                <p>إجابات على أشهر الأسئلة حول القسم.</p>
                <a href="example.html" class="general-button">اقرأ الأسئلة</a>
            </div>
            <div class="info-card" data-card-id="info-terms">
                <span class="favorite-icon">🤍</span>
                <img src="icon.png" alt="مصطلحات هندسية">
                <h3>مصطلحات هندسية</h3>
                <p>أهم مصطلحات هندسية حول القسم.</p>
                <a href="about.html" class="general-button">اقرأ الأسئلة</a>
            </div>
        </div>
    </section>
    <section class="info-cards-section container animated-section" id="notifications-section">
    <div class="section-header notifications-header">
        <div class="notifications-title">
            <span class="notif-icon" aria-hidden="true">🔔</span>
            <h2>الإشعارات</h2>
        </div>
        <p>آخر الملفات المضافة أو المحدّثة في Google Drive لقسم الميكاترونكس.</p>
        <div class="notifications-filters" aria-label="تصفية الإشعارات حسب المستوى">
            <button class="notif-filter active" data-level="all">الكل</button>
            <button class="notif-filter" data-level="000">مستوى 000</button>
            <button class="notif-filter" data-level="100">مستوى 100</button>
            <button class="notif-filter" data-level="200">مستوى 200</button>
            <button class="notif-filter" data-level="300">مستوى 300</button>
            <button class="notif-filter" data-level="400">مستوى 400</button>
        </div>
    </div>
    <div id="notifications-list" class="info-cards-container notifications-list">
        <div class="info-card notification-card">
            <h3>جاري تحميل الإشعارات...</h3>
            <p>انتظر قليلاً لحين جلب آخر التحديثات ✨</p>
        </div>
    </div>
</section>


    <section class="gpa-calculator container animated-section" id="gpa-calculator">
        <div class="calculator-header">
            <h2>حاسبة المعدل التراكمي</h2>
            <p>أدخل موادك الدراسية لحساب معدلك</p>
        </div>
        <div id="courses-container" class="modern-courses-container"></div>
        <div class="calculator-actions">
            <button id="add-course" class="modern-calc-button">
                <span>+</span> إضافة مادة
            </button>
            <button id="calculate-gpa" class="modern-calc-button primary">
                احسب المعدل
            </button>
            <button id="reset-calculator" class="modern-calc-button secondary">
                إعادة تعيين
            </button>
        </div>
        <div id="gpa-result" class="modern-result">
            <div class="result-label">المعدل التراكمي</div>
            <div class="result-value">--</div>
        </div>
    </section>

    <section class="about-section container animated-section" id="aboutus-section">
        <div class="about-content">
            <div class="about-text">
                <div class="section-header">
                    <h2>مين إحنا؟</h2>
                </div>
                <p>
                    إحنا طلاب في قسم ميكاترونكس بجامعة الزقازيق الأهلية، حابين نسهّل على نفسنا وعلى زملائنا المشوار. عشان كده بدأنا نجهز المكان ده كمرجع بسيط تلاقي فيه كل اللي ممكن تحتاجه عن القسم — من أدوات، شروحات، معلومات عن المواد، وحاجات تانية بنضيفها كل فترة.
                    <br><br>
                    الفكرة جات من تجاربنا، كنا دايمًا بندوّر على حاجات ومش بنلاقيها بسهولة، فقلنا بدل ما كل حد يدوّر لوحده، نجمع كل حاجة في مكان واحد يكون متاح لينا ولكل اللي جايين بعدنا.
                    <br><br>
                    الموقع لسه في بدايته، وإحنا بنطور فيه على قد ما نقدر. فلو عندك أي سؤال أو أي مشكلة بتواجهك تواصل معنا، لو عندك إضافة أو فكرة تحس إنها هتفيد، ماتترددش تشاركنا بيها.
                </p>
                <a href="questions.html" class="general-button about-button">تواصل معنا</a>
            </div>
            <!-- --- Clickable image (Already working) --- -->
            <div class="about-image">
                <a href="questions.html" aria-label="تواصل معنا (صورة فريق الميكاترونكس)">
                    <img src="us.jpg" alt="فريق الميكاترونكس">
                </a>
            </div>
            <!-- --- End Clickable image --- -->
        </div>
    </section>
</main>

<footer class="site-footer">
    <div class="container footer-content">
        <p>
            <span class="highlight">قسم الميكاترونيكس</span> - جامعة الزقازيق الأهلية 
        </p>
        <p>
            نسعى لتمكين طلابنا بالمعرفة والمهارات اللازمة لمستقبل مشرق.
        </p>
        <p class="quote">
            "الميكاترونكس: حيث تلتقي الأفكار بالواقع."
        </p>
        <p class="copy">
            &copy; 2024 جميع الحقوق محفوظة.
        </p>
        <div class="visitor-counter">
            عدد الزوار: <span id="visitor-count">0</span>
        </div>
    </div>
</footer>

<div class="overlay" id="overlay"></div>

<script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- Loading Screen ---
        const loadingScreen = document.getElementById('loading-screen');
        window.addEventListener('load', () => {
            loadingScreen.classList.add('loading-screen-hidden');
        });

        // --- Scroll Animations ---
        const animatedSections = document.querySelectorAll('.animated-section');

        // --- MODIFICATION START: Section fade-in and fade-out ---
        // Observer for general section fade-in and fade-out
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                } else {
                    // Add this else block to fade out
                    entry.target.classList.remove('is-visible');
                }
            });
        }, { root: null, rootMargin: '0px', threshold: 0.1 }); // Trigger at 10% visibility
        // --- MODIFICATION END ---

        // --- MODIFICATION START: Simplified observer attachment ---
        animatedSections.forEach(section => {
            sectionObserver.observe(section);
        });
        // --- MODIFICATION END ---


        // --- General Page Logic ---
        // const mainNav = document.getElementById('main-nav'); // OLD, REMOVED
        const overlay = document.getElementById('overlay');
        const body = document.body;
        // const fixedLogoToggle = document.getElementById('fixed-logo-menu-toggle'); // OLD, REMOVED

        // const closeMenu = () => { // OLD, REMOVED
        // };
        // const openMenu = () => { // OLD, REMOVED
        // };
        // if (fixedLogoToggle) { // OLD, REMOVED
        // }
        // if (overlay) { // This is for the *new* overlay
        //     overlay.addEventListener('click', closeMenu);
        // }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                // Check if it's a valid hash link
                if (href && href.startsWith('#') && href.length > 1) {
                    const targetId = href.substring(1);
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        e.preventDefault(); // Only prevent default if target exists
                        targetElement.scrollIntoView({ behavior: 'smooth' });
                    }
                    // updateActiveNavLink(this); // This might conflict with other nav scripts
                    
                    // Desktop menu closing is handled here
                    // if (window.innerWidth > 767 && mainNav && mainNav.classList.contains('active')) { // OLD, REMOVED
                    //    closeMenu();
                    // }
                }
                 // Allow default behavior for external links or links without hash
            });
        });

        function updateActiveNavLink(activeLink) {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            activeLink.classList.add('active');
        }

        // Desktop header scroll behavior
        // const desktopHeader = document.getElementById('desktop-main-header'); // OLD, REMOVED
        const mainContent = document.querySelector('main'); // Select main element

        window.addEventListener('scroll', () => {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (window.innerWidth > 767 && mainContent) { // Check if elements exist
                if (scrollTop > 100) {
                    // desktopHeader.classList.add('scrolled'); // OLD, REMOVED
                    // fixedLogoToggle.classList.add('scrolled-active'); // OLD, REMOVED
                    if (body) body.classList.add('scrolled-lighter'); // Check if body exists
                    mainContent.classList.add('scrolled');
                } else {
                    // desktopHeader.classList.remove('scrolled'); // OLD, REMOVED
                    // fixedLogoToggle.classList.remove('scrolled-active'); // OLD, REMOVED
                     if (body) body.classList.remove('scrolled-lighter'); // Check if body exists
                    mainContent.classList.remove('scrolled');
                }
            }
        });

        // Favorite functionality
        const setupFavoriteIcons = () => {
            document.querySelectorAll('.favorite-icon').forEach(icon => {
                icon.addEventListener('click', (e) => {
                    e.stopPropagation();
                    e.preventDefault();
                    const card = icon.closest('.level-card, .info-card');
                    if (!card) return; // Prevent error if card not found
                    const cardId = card.getAttribute('data-card-id');
                    if (!cardId) return; // Prevent error if no card ID
                    toggleFavorite(cardId, card, icon);
                });
            });
        };

        const toggleFavorite = (cardId, card, icon) => {
            try {
                const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
                const isFavorited = favorites.includes(cardId);
                if (isFavorited) {
                    favorites.splice(favorites.indexOf(cardId), 1);
                    card.classList.remove('favorited');
                    if (icon) icon.innerHTML = '🤍';
                } else {
                    favorites.push(cardId);
                    card.classList.add('favorited');
                     if (icon) icon.innerHTML = '💖';
                }
                localStorage.setItem('favorites', JSON.stringify(favorites));
                updateFavoriteSection();
            } catch (error) {
                console.error("Error toggling favorite:", error);
            }
        };

        const updateFavoriteSection = () => {
            const favoriteSection = document.getElementById('favorite-section');
            const favoriteContainer = document.getElementById('favorite-cards-container');
            if (!favoriteSection || !favoriteContainer) return; // Ensure elements exist

            try {
                const favorites = JSON.parse(localStorage.getItem('favorites')) || [];

                favoriteSection.style.display = favorites.length > 0 ? 'block' : 'none';
                favoriteContainer.innerHTML = ''; // Clear previous content

                favorites.forEach(cardId => {
                    const originalCard = document.querySelector(`[data-card-id="${cardId}"]`);
                    if (originalCard) {
                        const clonedCard = originalCard.cloneNode(true);
                         const favIcon = clonedCard.querySelector('.favorite-icon');
                         if (favIcon) favIcon.remove(); // Remove icon from clone

                        const removeButton = document.createElement('button');
                        removeButton.className = 'general-button remove-favorite';
                        removeButton.innerText = 'إزالة من المفضلة';
                        removeButton.addEventListener('click', (e) => {
                            e.stopPropagation();
                            e.preventDefault();
                            // Find the original icon on the original card to update its state
                            const originalIcon = originalCard.querySelector('.favorite-icon');
                            toggleFavorite(cardId, originalCard, originalIcon);
                        });
                        clonedCard.appendChild(removeButton);
                        favoriteContainer.appendChild(clonedCard);
                    }
                });
            } catch (error) {
                console.error("Error updating favorite section:", error);
            }
        };

        const loadFavorites = () => {
             try {
                const favorites = JSON.parse(localStorage.getItem('favorites')) || [];
                document.querySelectorAll('.level-card, .info-card').forEach(card => {
                    const cardId = card.getAttribute('data-card-id');
                     if (!cardId) return;
                    if (favorites.includes(cardId)) {
                        card.classList.add('favorited');
                        const icon = card.querySelector('.favorite-icon');
                        if (icon) icon.innerHTML = '💖';
                    } else {
                        // Ensure non-favorites have the default icon
                         card.classList.remove('favorited');
                         const icon = card.querySelector('.favorite-icon');
                         if (icon) icon.innerHTML = '🤍';
                    }
                });
                updateFavoriteSection();
             } catch (error) {
                  console.error("Error loading favorites:", error);
             }
        };

        // Visitor counter
        const updateVisitorCount = () => {
            const visitorCountElement = document.getElementById('visitor-count');
            if (!visitorCountElement) return; // Ensure element exists

             try {
                let totalVisits = parseInt(localStorage.getItem('totalVisits')) || 0;
                if (!sessionStorage.getItem('sessionVisited')) {
                    totalVisits++;
                    localStorage.setItem('totalVisits', totalVisits);
                    sessionStorage.setItem('sessionVisited', 'true');
                }
                visitorCountElement.textContent = totalVisits;
             } catch (error) {
                console.error("Error updating visitor count:", error);
                visitorCountElement.textContent = 'N/A'; // Indicate an error
             }
        };

        // --- GPA Calculator ---
        const coursesContainer = document.getElementById('courses-container');
        const addCourseButton = document.getElementById('add-course');
        const calculateGpaButton = document.getElementById('calculate-gpa');
        const resetCalculatorButton = document.getElementById('reset-calculator');
        const gpaResult = document.getElementById('gpa-result');
        let courseIdCounter = 0; // Counter for unique IDs

        const addCourseInput = () => {
             if (!coursesContainer) return; // Check if container exists
            courseIdCounter++;
            const courseRow = document.createElement('div');
            courseRow.className = 'course-input-row';
            // ADDED LABELS WITH 'for' ATTRIBUTE and INPUTS WITH 'id'
            courseRow.innerHTML = `
                <div class="input-group">
                    <label for="course-name-${courseIdCounter}">اسم المادة</label>
                    <input type="text" id="course-name-${courseIdCounter}" class="course-name" placeholder="اسم المادة">
                </div>
                <div class="input-group">
                    <label for="course-grade-${courseIdCounter}">الدرجة</label>
                    <select id="course-grade-${courseIdCounter}" class="course-grade">
                        <option value="4.0">A+</option><option value="3.7">A</option><option value="3.3">B+</option><option value="3.0">B</option><option value="2.7">C+</option><option value="2.3">C</option><option value="2.0">D</option><option value="0.0">F</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="course-credits-${courseIdCounter}">الساعات المعتمدة</label>
                    <input type="number" id="course-credits-${courseIdCounter}" class="course-credits" min="1" max="6" value="3">
                </div>
                <button class="remove-course" aria-label="إزالة المادة">إزالة</button>
            `;
            coursesContainer.appendChild(courseRow);
            const removeButton = courseRow.querySelector('.remove-course');
             if (removeButton) { // Check if button exists
                removeButton.addEventListener('click', () => {
                    courseRow.remove();
                    calculateGPA(); // Recalculate GPA after removing a course
                });
             }
        };

        const calculateGPA = () => {
            if (!coursesContainer || !gpaResult) return; // Check if elements exist
            let totalPoints = 0, totalCredits = 0;
            coursesContainer.querySelectorAll('.course-input-row').forEach(row => {
                const gradeSelect = row.querySelector('.course-grade');
                const creditsInput = row.querySelector('.course-credits');

                if (gradeSelect && creditsInput) { // Ensure inputs exist
                    const grade = parseFloat(gradeSelect.value);
                    const credits = parseInt(creditsInput.value);
                    if (!isNaN(grade) && !isNaN(credits) && credits > 0) { // Basic validation
                        totalPoints += grade * credits;
                        totalCredits += credits;
                    }
                }
            });
            const gpa = totalCredits > 0 ? (totalPoints / totalCredits).toFixed(2) : '0.00';
             const resultValueElement = gpaResult.querySelector('.result-value');
             if (resultValueElement) { // Check if element exists
                resultValueElement.textContent = gpa;
             }
            gpaResult.style.display = 'flex';
        };

        const resetCalculator = () => {
             if (!coursesContainer || !gpaResult) return; // Check if elements exist
            coursesContainer.innerHTML = ''; // Clear existing rows
            const resultValueElement = gpaResult.querySelector('.result-value');
            if (resultValueElement) {
                 resultValueElement.textContent = '--';
            }
            gpaResult.style.display = 'none';
            addCourseInput(); // Add one initial row after reset
        };

        // Add event listeners only if the buttons exist
        if (addCourseButton) addCourseButton.addEventListener('click', addCourseInput);
        if (calculateGpaButton) calculateGpaButton.addEventListener('click', calculateGPA);
        if (resetCalculatorButton) resetCalculatorButton.addEventListener('click', resetCalculator);

        // Initializations (ensure elements exist before calling)
        updateVisitorCount();
        loadFavorites();
        setupFavoriteIcons();
         // Add first GPA course row only if container exists
         if (coursesContainer) {
             addCourseInput();
         }
    });

</script>


<!-- MOD: DELETED OLD, REDUNDANT SCRIPT for bottom-nav -->
<!-- <script> ... </script> -->


<script>
// --- MOBILE NAVIGATION FIXES SCRIPT ---
(function(){
  const bottomNav = document.getElementById('bottom-nav'); // This is the OLD one, script will fail gracefully
  const mainNav = document.getElementById('main-nav'); // This is the OLD one, script will fail gracefully
  const overlay = document.getElementById('overlay');
  const bnMenu = document.getElementById('bn-menu'); // OLD
  const body = document.body;
  // MOD: Changed this selector to target the NEW header
  const header = document.getElementById('new-main-header'); 
  let manualScroll = false; // Flag to detect clicks on nav items

  // Check if critical elements exist before proceeding
  // MOD: Removed checks for elements I deleted
  if (!body || !header) { 
      console.warn("Mobile navigation elements not found, skipping script execution.");
      return; // Exit if elements are missing
  }

  // --- MODIFICATION START: Explicitly hide on non-mobile initially ---
  if (bottomNav && window.innerWidth > 767) { // Check if bottomNav exists
      bottomNav.style.display = 'none';
  }
  // --- MODIFICATION END ---

  // ... (Functions showBottomNav, hideBottomNav, openMainNav, closeMainNav are for OLD nav, will fail gracefully) ...

  // Scroll detection for header/bottom nav hide/show
  (function(){
    let lastY = window.pageYOffset || document.documentElement.scrollTop;
    let ticking = false;
    window.addEventListener('scroll', function(){
      // --- MODIFICATION START: Only run scroll logic on mobile ---
      if (window.innerWidth > 767) {
          // Ensure bottom nav is hidden if window becomes desktop size during scroll
          if (bottomNav && (!bottomNav.classList.contains('hidden') || bottomNav.style.display !== 'none')) {
             // hideBottomNav(); // OLD
             bottomNav.style.display = 'none';
          }
          return; // Don't run hide/show logic on desktop
      }
      // --- MODIFICATION END ---

      if (manualScroll) return; // Prevent hiding nav during manual scroll
      const y = window.pageYOffset || document.documentElement.scrollTop;
      if(!ticking){
        window.requestAnimationFrame(function(){
          const dy = y - lastY;
          if(Math.abs(dy) > 8){ // Sensitivity threshold
            // if(mainNav.classList.contains('active')) return; // OLD

            if(dy > 0){ // Scrolling down
              // hideBottomNav(); // OLD
              // if (header) header.classList.add('header-hidden'); // MOD: REMOVED to allow IntersectionObserver to control header
            } else { // Scrolling up
              // showBottomNav(true); // OLD
              // if (header) header.classList.remove('header-hidden'); // MOD: REMOVED to allow IntersectionObserver to control header
            }
          }
          lastY = y <= 0 ? 0 : y; // For Mobile or negative scrolling
          ticking = false;
        });
        ticking = true;
      }
    }, {passive:true}); // Use passive listener for performance

  })();

    // ... (rest of old script) ...

})();
</script>


<!-- iPhone-Style Enhancements by ChatGPT -->
<style>
:root {
  --primary-color: #1A741A;
  --secondary-color: #5A9367;
  --accent-color: #8CB48C;
  --light-bg: #F8F9FA;
  --white: #FFFFFF;
  --dark-text: #1C1F23;
}
html { scroll-behavior: smooth; }
.animated-section { opacity: 0; transform: translateY(20px); transition: opacity .6s ease, transform .6s ease; will-change: opacity, transform; }
.animated-section.visible { opacity: 1; transform: translateY(0); }

/* === iPhone-style Dock === */
.bottom-nav {
  position: fixed; bottom: 14px; left: 50%; transform: translateX(-50%);
  width: calc(100% - 28px); max-width: 720px; height: 64px;
  background: rgba(255,255,255,0.35);
  border: 1px solid rgba(255,255,255,0.5);
  backdrop-filter: blur(14px) saturate(1.2);
  border-radius: 22px; display: flex; justify-content: space-around; align-items: center;
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
  z-index: 1500; transition: transform .45s cubic-bezier(.2,.9,.3,1), opacity .3s;
}
.bottom-nav.hidden { transform: translateX(-50%) translateY(120%); opacity: 0; }
.bottom-nav .nav-item {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-decoration: none; color: var(--dark-text); font-size: 12px; font-weight: 600;
  gap: 4px; transition: transform .25s ease, color .3s;
}
.bottom-nav .nav-item svg { width: 22px; height: 22px; fill: var(--primary-color); }
.bottom-nav .nav-item.active { color: var(--primary-color); transform: translateY(-3px); }

/* === Expanding Menu === */
.main-nav {
  position: fixed; bottom: -100%; left: 0; width: 100%; height: 60vh;
  background: rgba(255,255,255,0.55);
  backdrop-filter: blur(16px) saturate(1.4);
  border-top-left-radius: 24px; border-top-right-radius: 24px;
  box-shadow: 0 -8px 30px rgba(0,0,0,0.18);
  transition: transform .55s cubic-bezier(.34,1.56,.64,1), opacity .4s ease;
  z-index: 1400; padding: 1.5rem; display: flex; flex-direction: column; align-items: center;
  opacity: 0;
}
.main-nav.active { bottom: 0; transform: translateY(0); opacity: 1; }
.main-nav-list { list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(2,1fr); gap: 1rem; width: 100%; }
.main-nav-list li a { display: block; background: var(--white); border-radius: 16px; padding: 1rem; text-align: center; color: var(--primary-color); font-weight: 700; box-shadow: 0 4px 12px rgba(0,0,0,0.08); transition: transform .25s ease, box-shadow .3s ease; }
.main-nav-list li a:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(0,0,0,0.12); }

.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.45); backdrop-filter: blur(5px); z-index: 1399; opacity: 0; pointer-events: none; transition: opacity .3s ease; }
.overlay.active { opacity: 1; pointer-events: auto; }

/* === Back To Top === */
#backToTop {
  position: fixed; bottom: 90px; left: 50%; transform: translateX(-50%) scale(0);
  width: 52px; height: 52px; border-radius: 50%; border: none;
  background: rgba(255,255,255,0.45); backdrop-filter: blur(10px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  cursor: pointer; z-index: 1600; transition: transform .4s cubic-bezier(.2,.9,.3,1), opacity .3s, left 0.3s ease, right 0.3s ease, bottom 0.3s ease; /* MOD: Added transitions */
}
#backToTop.visible { transform: translateX(-50%) scale(1); }
#backToTop svg { width: 24px; height: 24px; fill: var(--primary-color); }

/* MOD: Added desktop styles for Back-to-Top arrow */
@media (min-width: 768px) {
    #backToTop {
        bottom: 30px; /* Align with bottom nav */
        left: auto;
        right: 30px;
        transform: scale(0); /* Reset transform */
    }
    #backToTop.visible {
        transform: scale(1); /* Simple scale transform */
    }
}
</style>

<!-- Elements for new nav and overlay -->
<div class="overlay" id="overlay"></div>
<nav class="main-nav" id="mainNav">
  <ul class="main-nav-list">
    <li><a href="#cards-section">الخطط</a></li>
    <li><a href="#extras-section">الموارد</a></li>
    <li><a href="#notifications-section">الإشعارات</a></li>
    <li><a href="#gpa-calculator">الحاسبة</a></li>
    <li><a href="#aboutus-section">من نحن</a></li>
    <li><a href="#aboutus-section">تواصل</a></li>
  </ul>
</nav>
<div class="bottom-nav" id="bottomNav">
  <a href="#home" class="nav-item active"><svg viewBox="0 0 24 24"><path d="M12 3l9 8h-3v9H6v-9H3z"/></svg><span>الرئيسية</span></a>
  <a href="#cards-section" class="nav-item"><svg viewBox="0 0 24 24"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"/></svg><span>القسم</span></a>
  <a href="#notifications-section" class="nav-item"><svg viewBox="0 0 24 24"><path d="M12 22a2 2 0 002-2H10a2 2 0 002 2zm6-6V11a6 6 0 10-12 0v5l-2 2v1h18v-1l-2-2z"/></svg><span>الإشعارات</span></a>
  <button class="nav-item" id="menuButton"><svg viewBox="0 0 24 24"><path d="M12 7a2 2 0 100-4 2 2 0 000 4zm0 2a2 2 0 100 4 2 2 0 000-4zm0 6a2 2 0 100 4 2 2 0 000-4z"/></svg><span>القائمة</span></button>
  <a href="#info-cards-section" class="nav-item"><svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zM11 10h2v6h-2zm0-4h2v2h-2z"/></svg><span>معلومات</span></a>
  <a href="#aboutus-section" class="nav-item"><svg viewBox="0 0 24 24"><path d="M21 8V7l-3 2-2-2-3 3 2 2-2 2 3 3 2-2 3 2v-1l-2-2 2-2z"/></svg><span>تواصل</span></a>
</div>
<button id="backToTop" title="للأعلى"><svg viewBox="0 0 24 24"><path d="M12 8l6 6H6z"/></svg></button>

<script>
// Scroll fade-in fix
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) entry.target.classList.add('visible');
  });
}, { threshold: 0.15 });
document.querySelectorAll('.animated-section').forEach(sec => observer.observe(sec));

// Hide/show dock + header on scroll (mobile)
let lastScroll = 0;
const bottomNav = document.getElementById('bottomNav');
const newHeader = document.getElementById('new-main-header');

window.addEventListener('scroll', () => {
  if (!bottomNav && !newHeader) return;

  const current = window.scrollY;
  const goingDown = current > lastScroll;
  const threshold = 80;

  // Only apply this behaviour on mobile / small tablets
  if (window.innerWidth <= 767) {
    if (goingDown && current > threshold) {
      // Scroll down → hide both header + bottom dock for full-screen content
      if (bottomNav) bottomNav.classList.add('hidden');
      if (newHeader) newHeader.classList.add('hidden');
    } else {
      // Scroll up (or near top) → show them again
      if (bottomNav) bottomNav.classList.remove('hidden');
      if (newHeader) newHeader.classList.remove('hidden');
    }
  }

  lastScroll = current <= 0 ? 0 : current;
});


// Menu open/close
const menuBtn = document.getElementById('menuButton');
const mainNav = document.getElementById('mainNav');
const overlay = document.getElementById('overlay');
if (menuBtn && mainNav && overlay) { // Add check
    menuBtn.addEventListener('click', () => {
      mainNav.classList.add('active'); overlay.classList.add('active');
    });
    overlay.addEventListener('click', () => {
      mainNav.classList.remove('active'); overlay.classList.remove('active');
    });
    // Add closing on link click for new menu
    mainNav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            mainNav.classList.remove('active'); overlay.classList.remove('active');
        });
    });
}


// Back to top button
const backToTop = document.getElementById('backToTop');
if(backToTop){ // Add check
    window.addEventListener('scroll', () => {
      if (window.scrollY > 500) backToTop.classList.add('visible');
      else backToTop.classList.remove('visible');
    });
    backToTop.addEventListener('click', () => window.scrollTo({top:0,behavior:'smooth'}));
}
</script>


<!-- Animated logo intro and centered glossy bottom navbar -->
<!-- MOD: DELETED <img id="intro-logo" ... > -->

<div class="bottom-navbar" id="bottomNavbar">
  <!-- MOD: Wrapped logo in link, changed src -->
  <!-- MOD: Moved span inside link, after logo -->
  <a href="#home" id="navLogoLink" class="new-header-logo-link" aria-label="العودة للأعلى">
    <img src="logo.png" id="navLogo" alt="logo"> <!-- MOD: logo.png -->
    
  </a>
  <a class="nav-logo-text">Menu</a> <!-- MOD: MOVED HERE -->
  <!-- MOD: Deleted span from here -->
  <nav>
    <a href="#home">الرئيسية</a>
    <a href="#about-section">عن القسم</a>
    <a href="#extras-section">الموارد</a>
    <a href="#gpa-calculator">حاسبة المعدل</a>
    <a href="#aboutus-section">تواصل</a>
  </nav>
</div>

<style>
/* MOD: DELETED #intro-logo styles */

.bottom-navbar img {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  cursor: pointer;
  transition: transform 0.5s ease;
}

.bottom-navbar img:hover {
  transform: scale(1.15);
}

.bottom-navbar nav {
  display: flex;
  gap: 1.2rem;
  opacity: 0;
  max-width: 0;
  overflow: hidden;
  transition: all 0.6s cubic-bezier(0.34,1.56,0.64,1);
}

.bottom-navbar:hover nav,
.bottom-navbar.active nav {
  opacity: 1;
  max-width: 500px;
}

.bottom-navbar nav a {
  color: #1A741A;
  text-decoration: none;
  font-weight: 600;
  font-size: 1.05rem;
  position: relative;
}

.bottom-navbar nav a::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(to right, #1A741A, #5A9367);
  transform: scaleX(0);
  transform-origin: right;
  transition: transform 0.3s ease;
}

.bottom-navbar nav a:hover::after {
  transform: scaleX(1);
  transform-origin: left;
}

.cards-section .cards-grid {
  display: grid !important;
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 1rem !important;
}
@media (min-width: 768px) {
  .cards-section .cards-grid { grid-template-columns: repeat(4, 1fr) !important; }
}
</style>

<!-- MOD: DELETED old navLogo click script -->

<!-- MOD: ADDED new script for desktop scroll and logo clicks -->
<script>
document.addEventListener('DOMContentLoaded', () => {
    const newHeader = document.getElementById('new-main-header');
    const desktopNav = document.getElementById('bottomNavbar');
    const navLogoLink = document.getElementById('navLogoLink');
    const newHeaderLogoLink = document.querySelector('.new-header-logo-link');

    // --- Logo Click to Top (Desktop Nav) ---
    if (navLogoLink) {
        navLogoLink.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
            if(desktopNav) desktopNav.classList.remove('active');
        });
    }
    
    // --- Logo Click to Top (New Header) ---
    if (newHeaderLogoLink) {
         newHeaderLogoLink.addEventListener('click', (e) => {
            e.preventDefault();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    }

    // --- NEW HERO OBSERVER LOGIC ---
    // Controls desktop dock + header based on hero visibility (desktop only)
    const heroSection = document.getElementById('home');
    
    if (heroSection && newHeader) { // Check that hero and header exist
        const heroObserver = new IntersectionObserver(([entry]) => {
            if (window.innerWidth > 767) {
                if (entry.isIntersecting) {
                    // Desktop: hero is visible → show header, hide desktop dock
                    newHeader.classList.remove('hidden');
                    if (desktopNav) {
                        desktopNav.classList.remove('visible');
                    }
                } else {
                    // Desktop: hero is NOT visible → hide header, show desktop dock
                    newHeader.classList.add('hidden');
                    if (desktopNav) {
                        desktopNav.classList.add('visible');
                    }
                }
            } else {
                // On mobile/tablet: hero visibility does NOT control the header;
                // scroll logic will handle showing/hiding.
            }
        }, {
            root: null,
            rootMargin: '0px', // Triggers as soon as it enters/leaves
            threshold: 0.01 // Trigger on 1% visibility
        });
    
        heroObserver.observe(heroSection);
    }
    // --- END NEW LOGIC ---
});
</script>

<!-- ================================== -->
<!-- START: UPDATED NOTIFICATION SCRIPT -->
<!-- ================================== -->
<script>
document.addEventListener('DOMContentLoaded', async () => {
    const NOTIFICATIONS_API_URL = "/.netlify/functions/notification";
    const container = document.getElementById("notifications-list");
    const filterButtons = document.querySelectorAll('.notif-filter');
    if (!container) return;

    let notifications = []; // This will store the data from the API
    let activeLevel = 'all';

    // --- The detectLevel function is now REMOVED ---
    // The 'level' property will come directly from the API.

    const renderNotifications = () => {
        if (!notifications || notifications.length === 0) {
            container.classList.add("single-notification");
            container.innerHTML = `
                <div class="info-card notification-card">
                    <h3>مافيش إشعارات حالياً</h3>
                    <p>أول ما نرفع ملفات على Google Drive هتظهر هنا على طول 💚</p>
                </div>
            `;
            return;
        }

        const filtered = activeLevel === 'all'
            ? notifications
            : notifications.filter(item => item.level === activeLevel); // This logic remains the same

        if (filtered.length === 0) {
            container.classList.add("single-notification");
            container.innerHTML = `
                <div class="info-card notification-card">
                    <h3>مافيش إشعارات لهذا المستوى</h3>
                    <p>غيّر الفلتر أو استنى لما نرفع ملفات جديدة لهذا الليفل.</p>
                </div>
            `;
            return;
        }

        container.innerHTML = '';
        container.classList.toggle("single-notification", filtered.length === 1);

        filtered.forEach(file => {
            const date = new Date(file.updatedTime);
            const formatted = date.toLocaleString("ar-EG", {
                year: "numeric",
                month: "long",
                day: "numeric",
                hour: "2-digit",
                minute: "2-digit"
            });

            const card = document.createElement("div");
            card.className = "info-card notification-card";

            let levelLabel = '';
            // The file.level property now comes directly from the API
            if (file.level && file.level !== 'other') {
                levelLabel = `مستوى ${file.level}`;
            } else {
                levelLabel = 'موارد عامة';
            }

            card.innerHTML = `
                <div class="notification-card-header">
                    <span class="notif-icon" aria-hidden="true">📄</span>
                    <div class="notification-card-text">
                        <h3>${file.name}</h3>
                        <p class="notification-meta">${levelLabel} • تحديث في: ${formatted}</p>
                    </div>
                </div>
                <a href="${file.url}" target="_blank" rel="noopener noreferrer" class="general-button">
                    فتح الملف على Google Drive
                </a>
            `;

            container.appendChild(card);
        });
    };

    // Link filter buttons
    if (filterButtons && filterButtons.length) {
        filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const level = btn.getAttribute('data-level');
                if (!level) return;
                activeLevel = level;

                filterButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');

                renderNotifications();
            });
        });
    }

    // Fetch data
    try {
        const res = await fetch(NOTIFICATIONS_API_URL);
        if (!res.ok) throw new Error("HTTP " + res.status);

        const data = await res.json();

        // --- MODIFIED: Data now includes the 'level' property ---
        if (Array.isArray(data)) {
            notifications = data; // Simply assign the data
        } else {
            notifications = [];
        }
        // --- END MODIFICATION ---

        renderNotifications();

        // --- Badge logic remains the same ---
        const notifCount = notifications.length;
        const infoNavLink = document.querySelector('.bottom-nav .nav-item[href="#notifications-section"]');
        if (infoNavLink && notifCount > 0) {
            let badge = infoNavLink.querySelector('.notif-badge');
            if (!badge) {
                badge = document.createElement('span');
                badge.className = 'notif-badge';
                infoNavLink.appendChild(badge);
            }
            badge.textContent = notifCount > 9 ? '9+' : notifCount;
        }
    } catch (err) {
        console.error("Error loading notifications:", err);
        container.innerHTML = `
            <div class="info-card notification-card">
                <h3>ما قدرناش نجيب الإشعارات حالياً</h3>
                <p>جرّب تحدث الصفحة لاحقاً، أو اتأكد من إعدادات Google Drive/Apps Script.</p>
            </div>
        `;
    }
});
</script>
<!-- ================================== -->
<!--  END: UPDATED NOTIFICATION SCRIPT  -->
<!-- ================================== -->

<script>
  // Fix 100vh issues on mobile browsers (Android + iOS)
  (function () {
    const setVh = () => {
      const vh = window.innerHeight * 0.01;
      document.documentElement.style.setProperty('--vh', vh + 'px');
    };
    window.addEventListener('resize', setVh);
    window.addEventListener('orientationchange', setVh);
    setVh();
  })();
</script>

</body>

</html>
